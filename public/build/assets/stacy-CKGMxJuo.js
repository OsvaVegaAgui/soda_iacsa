document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("formEditar"),t=document.getElementById("mensaje"),o=(s="info",a="")=>{if(!t)return;const e={success:"Éxito",danger:"Error",warning:"Atención",info:"Información"};t.className=`alert alert-${s}`,t.innerHTML=`<strong>${e[s]}</strong> ${a}`,t.style.display="",setTimeout(()=>{t.style.display="none"},3e3)};n&&n.addEventListener("submit",async s=>{s.preventDefault();const a=new FormData(n);try{const e=await fetch(n.action,{method:"POST",body:a,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),r=await e.json();if(e.status===422){o("danger","Debe completar todos los campos.");return}if(!r.ok){o("danger",r.message||"Error desconocido");return}o("success",r.message),setTimeout(()=>{window.location.href=r.redirect},2500)}catch(e){console.error(e),o("danger","Error de conexión.")}})});
